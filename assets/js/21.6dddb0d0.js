(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{410:function(t,e,n){"use strict";n(411);var s=function(){var t=0,e=document.createElement("div");function n(t){return e.appendChild(t.dom),t}function a(n){for(var s=0;s<e.children.length;s++)e.children[s].style.display=s===n?"block":"none";t=n}e.style.cssText="position:absolute;top:0;left:0;cursor:pointer;opacity:0.9;z-index:19",e.addEventListener("click",(function(n){n.preventDefault(),a(++t%e.children.length)}),!1);var o=(performance||Date).now(),r=o,p=0,c=n(new s.Panel("FPS","#0ff","#002")),i=n(new s.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=n(new s.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:e,addPanel:n,showPanel:a,begin:function(){o=(performance||Date).now()},end:function(){p++;var t=(performance||Date).now();if(i.update(t-o,200),t>=r+1e3&&(c.update(1e3*p/(t-r),100),r=t,p=0,l)){var e=performance.memory;l.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:e,setMode:a}};s.Panel=function(t,e,n){var s=1/0,a=0,o=Math.round,r=o(window.devicePixelRatio||1),p=80*r,c=48*r,i=3*r,l=2*r,u=3*r,v=15*r,_=74*r,d=30*r,m=document.createElement("canvas");m.width=p,m.height=c,m.style.cssText="width:80px;height:48px";var b=m.getContext("2d");return b.font="bold "+9*r+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=n,b.fillRect(0,0,p,c),b.fillStyle=e,b.fillText(t,i,l),b.fillRect(u,v,_,d),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(u,v,_,d),{dom:m,update:function(c,k){s=Math.min(s,c),a=Math.max(a,c),b.fillStyle=n,b.globalAlpha=1,b.fillRect(0,0,p,v),b.fillStyle=e,b.fillText(o(c)+" "+t+" ("+o(s)+"-"+o(a)+")",i,l),b.drawImage(m,u+r,v,_-r,d,u,v,_-r,d),b.fillRect(u+_-r,v,r,d),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(u+_-r,v,r,o((1-c/k)*d))}}},e.a=s},411:function(t,e,n){"use strict";var s=n(12),a=n(2),o=n(187),r=n(5),p=TypeError,c=Object.defineProperty,i=a.self!==a;try{if(r){var l=Object.getOwnPropertyDescriptor(a,"self");!i&&l&&l.get&&l.enumerable||o(a,"self",{get:function(){return a},set:function(t){if(this!==a)throw new p("Illegal invocation");c(a,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else s({global:!0,simple:!0,forced:i},{self:a})}catch(t){}},414:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return c})),n.d(e,"g",(function(){return i})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"h",(function(){return v})),n.d(e,"a",(function(){return _}));n(19),n(111);var s=n(410),a=n(408),o=n(416);function r(t,e){var n=void 0!==t&&t&&!isNaN(t)?parseInt(t):0,a=new s.a;return a.showPanel(n),e.appendChild(a.dom),a}function p(t,e){var n=void 0!==e&&e?e:{},s=new a.ec(n);return s.shadowMap.enabled=!0,s.shadowMapSoft=!0,s.shadowMap.type=a.pb,s.setClearColor(new a.q(0)),s.setSize(t.clientWidth,t.clientHeight),s.shadowMap.enabled=!0,t.appendChild(s.domElement),s}function c(t,e){var n=void 0!==e?e:new a.Zb(-30,40,30),s=new a.qb(45,t.clientWidth/t.clientHeight,.1,1e3);return s.position.set(n.x,n.y,n.z),s.lookAt(new a.Zb(0,0,0)),s}function i(t,e){var n=new o.a(t,e.domElement);return n.rotateSpeed=1,n.zoomSpeed=1.2,n.panSpeed=.8,n.noZoom=!1,n.noPan=!1,n.staticMoving=!0,n.dynamicDampingFactor=.3,n.keys=[65,83,68],n}function l(t,e){var n=void 0!==e?e:new a.Zb(-10,30,40),s=new a.Nb(16777215);s.position.copy(n),s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.fov=15,s.castShadow=!0,s.decay=2,s.penumbra=.05,s.name="spotLight",t.add(s);var o=new a.c(3421236);o.name="ambientLight",t.add(o)}function u(t){var e=new a.sb(60,20,120,120),n=new a.fb({color:16777215}),s=new a.cb(e,n);return s.receiveShadow=!0,s.rotation.x=-.5*Math.PI,s.position.x=15,s.position.y=0,s.position.z=0,t.add(s),s}function v(t,e){var n=t.children;n&&n.length>0?n.forEach((function(t){v(t,e)})):t instanceof a.cb&&(t.material instanceof Array?t.material.forEach((function(t){t.color=new a.q(e(Math.random()).hex()),0===t.name.indexOf("building")&&(t.emissive=new a.q(4473924),t.transparent=!0,t.opacity=.8)})):(t.material.color=new a.q(e(Math.random()).hex()),0==t.material.name.indexOf("building")&&(t.material.emissive=new a.q(4473924),t.material.transparent=!0,t.material.opacity=.8)))}function _(t){var e=new a.Rb,n=new a.fb({map:e.load("/daodao-knowledge/textures/earth/Earth.png"),normalMap:e.load("/daodao-knowledge/textures/earth/EarthNormal.png"),specularMap:e.load("/daodao-knowledge/textures/earth/EarthSpec.png"),specular:new a.q(4474026),normalScale:new a.Yb(6,6),shininess:.5}),s=new a.cb(new a.Lb(15,40,40),n);t.add(s);var o=new a.nb;return l(o),t.add(o),{earth:s,pivot:o}}},416:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var s=n(408);const a={type:"change"},o={type:"start"},r={type:"end"};class p extends s.y{constructor(t,e){super(),void 0===e&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const n=this,p=-1,c=0,i=1,l=2,u=3,v=4;this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:s.Y.ROTATE,MIDDLE:s.Y.DOLLY,RIGHT:s.Y.PAN},this.target=new s.Zb;const _=new s.Zb;let d=1,m=p,b=p,k=0,h=0,f=0;const w=new s.Zb,y=new s.Yb,g=new s.Yb,E=new s.Zb,C=new s.Yb,j=new s.Yb,x=new s.Yb,S=new s.Yb,M=[],L={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height};const Y=function(){const t=new s.Yb;return function(e,s){return t.set((e-n.screen.left)/n.screen.width,(s-n.screen.top)/n.screen.height),t}}(),R=function(){const t=new s.Yb;return function(e,s){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-s))/n.screen.width),t}}();function z(t){!1!==n.enabled&&(0===M.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",D),n.domElement.addEventListener("pointerup",T)),function(t){M.push(t)}(t),"touch"===t.pointerType?function(t){switch(H(t),M.length){case 1:m=u,g.copy(R(M[0].pageX,M[0].pageY)),y.copy(g);break;default:m=v;const t=M[0].pageX-M[1].pageX,e=M[0].pageY-M[1].pageY;h=k=Math.sqrt(t*t+e*e);const n=(M[0].pageX+M[1].pageX)/2,s=(M[0].pageY+M[1].pageY)/2;x.copy(Y(n,s)),S.copy(x)}n.dispatchEvent(o)}(t):function(t){if(m===p)switch(t.button){case n.mouseButtons.LEFT:m=c;break;case n.mouseButtons.MIDDLE:m=i;break;case n.mouseButtons.RIGHT:m=l;break;default:m=p}const e=b!==p?b:m;e!==c||n.noRotate?e!==i||n.noZoom?e!==l||n.noPan||(x.copy(Y(t.pageX,t.pageY)),S.copy(x)):(C.copy(Y(t.pageX,t.pageY)),j.copy(C)):(g.copy(R(t.pageX,t.pageY)),y.copy(g));n.dispatchEvent(o)}(t))}function D(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(H(t),M.length){case 1:y.copy(g),g.copy(R(t.pageX,t.pageY));break;default:const e=function(t){const e=t.pointerId===M[0].pointerId?M[1]:M[0];return L[e.pointerId]}(t),n=t.pageX-e.x,s=t.pageY-e.y;h=Math.sqrt(n*n+s*s);const a=(t.pageX+e.x)/2,o=(t.pageY+e.y)/2;S.copy(Y(a,o))}}(t):function(t){const e=b!==p?b:m;e!==c||n.noRotate?e!==i||n.noZoom?e!==l||n.noPan||S.copy(Y(t.pageX,t.pageY)):j.copy(Y(t.pageX,t.pageY)):(y.copy(g),g.copy(R(t.pageX,t.pageY)))}(t))}function T(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(M.length){case 0:m=p;break;case 1:m=u,g.copy(R(t.pageX,t.pageY)),y.copy(g);break;case 2:m=v,g.copy(R(t.pageX-y.pageX,t.pageY-y.pageY)),y.copy(g)}n.dispatchEvent(r)}(t):(m=p,n.dispatchEvent(r)),A(t),0===M.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",D),n.domElement.removeEventListener("pointerup",T)))}function P(t){A(t)}function O(t){!1!==n.enabled&&(window.removeEventListener("keydown",O),b===p&&(t.code!==n.keys[c]||n.noRotate?t.code!==n.keys[i]||n.noZoom?t.code!==n.keys[l]||n.noPan||(b=l):b=i:b=c))}function I(){!1!==n.enabled&&(b=p,window.addEventListener("keydown",O))}function Z(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:C.y-=.025*t.deltaY;break;case 1:C.y-=.01*t.deltaY;break;default:C.y-=25e-5*t.deltaY}n.dispatchEvent(o),n.dispatchEvent(r)}}function X(t){!1!==n.enabled&&t.preventDefault()}function A(t){delete L[t.pointerId];for(let e=0;e<M.length;e++)if(M[e].pointerId==t.pointerId)return void M.splice(e,1)}function H(t){let e=L[t.pointerId];void 0===e&&(e=new s.Yb,L[t.pointerId]=e),e.set(t.pageX,t.pageY)}this.rotateCamera=function(){const t=new s.Zb,e=new s.xb,a=new s.Zb,o=new s.Zb,r=new s.Zb,p=new s.Zb;return function(){p.set(g.x-y.x,g.y-y.y,0);let s=p.length();s?(w.copy(n.object.position).sub(n.target),a.copy(w).normalize(),o.copy(n.object.up).normalize(),r.crossVectors(o,a).normalize(),o.setLength(g.y-y.y),r.setLength(g.x-y.x),p.copy(o.add(r)),t.crossVectors(p,w).normalize(),s*=n.rotateSpeed,e.setFromAxisAngle(t,s),w.applyQuaternion(e),n.object.up.applyQuaternion(e),E.copy(t),f=s):!n.staticMoving&&f&&(f*=Math.sqrt(1-n.dynamicDampingFactor),w.copy(n.object.position).sub(n.target),e.setFromAxisAngle(E,f),w.applyQuaternion(e),n.object.up.applyQuaternion(e)),y.copy(g)}}(),this.zoomCamera=function(){let t;m===v?(t=k/h,k=h,n.object.isPerspectiveCamera?w.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom*=t,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(t=1+(j.y-C.y)*n.zoomSpeed,1!==t&&t>0&&(n.object.isPerspectiveCamera?w.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom/=t,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?C.copy(j):C.y+=(j.y-C.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new s.Yb,e=new s.Zb,a=new s.Zb;return function(){if(t.copy(S).sub(x),t.lengthSq()){if(n.object.isOrthographicCamera){const e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,s=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;t.x*=e,t.y*=s}t.multiplyScalar(w.length()*n.panSpeed),a.copy(w).cross(n.object.up).setLength(t.x),a.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(a),n.target.add(a),n.staticMoving?x.copy(S):x.add(t.subVectors(S,x).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(w.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,w.setLength(n.maxDistance)),C.copy(j)),w.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,w.setLength(n.minDistance)),C.copy(j)))},this.update=function(){w.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,w),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),_.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(a),_.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(_.distanceToSquared(n.object.position)>1e-6||d!==n.object.zoom)&&(n.dispatchEvent(a),_.copy(n.object.position),d=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){m=p,b=p,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),w.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(a),_.copy(n.object.position),d=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",X),n.domElement.removeEventListener("pointerdown",z),n.domElement.removeEventListener("pointercancel",P),n.domElement.removeEventListener("wheel",Z),n.domElement.removeEventListener("pointermove",D),n.domElement.removeEventListener("pointerup",T),window.removeEventListener("keydown",O),window.removeEventListener("keyup",I)},this.domElement.addEventListener("contextmenu",X),this.domElement.addEventListener("pointerdown",z),this.domElement.addEventListener("pointercancel",P),this.domElement.addEventListener("wheel",Z,{passive:!1}),window.addEventListener("keydown",O),window.addEventListener("keyup",I),this.handleResize(),this.update()}}},477:function(t,e,n){},513:function(t,e,n){"use strict";n(477)},546:function(t,e,n){"use strict";n.r(e);n(112);var s=n(408),a=n(413),o=n(414),r={data:()=>({gui:null}),mounted(){this.init()},beforeDestroy(){this.gui&&this.gui.destroy()},methods:{init(){var t=document.getElementById("three1"),e=Object(o.f)(0,t),n=Object(o.e)(t),r=Object(o.c)(t),p=new s.Fb;t.addEventListener("mousedown",(function(t){const e=E.intersectObjects([_,b,l]);e.length>0&&(e[0].object.material.transparent=!0,e[0].object.material.opacity=.1)}),!1),t.addEventListener("mousemove",(function(e){if(E.setFromCamera(C,r),C.x=e.offsetX/t.clientWidth*2-1,C.y=-e.offsetY/t.clientHeight*2+1,f.showRay){const t=E.intersectObjects([_,b,l]);if(t.length>0){var n=[];n.push(new s.Zb(-30,39.8,30)),n.push(t[0].point);var a=new s.db({color:16711680,transparent:!0,opacity:.6}),o=new s.Ub(new s.m(n),60,.001);y&&p.remove(y),f.showRay&&(y=new s.cb(o,a),p.add(y))}}}),!1),Object(o.d)(p),Object(o.b)(p).position.y=0;var c=new s.i(4,4,4),i=new s.hb({color:16711680}),l=new s.cb(c,i);l.castShadow=!0,l.position.x=-10,l.position.y=4,l.position.z=0,p.add(l);var u=new s.Lb(4,20,20),v=new s.hb({color:7829503}),_=new s.cb(u,v);_.position.x=20,_.position.y=0,_.position.z=2,p.add(_);var d=new s.s(2,2,20),m=new s.hb({color:7864183}),b=new s.cb(d,m);b.castShadow=!0,b.position.set(0,0,1),p.add(b),r.position.x=-30,r.position.y=40,r.position.z=30,r.lookAt(p.position);var k=new s.c(3487029);p.add(k);var h=0,f=new function(){this.rotationSpeed=.02,this.bouncingSpeed=.03,this.scalingSpeed=.03,this.showRay=!1},w=new a.GUI({},t);w.add(f,"rotationSpeed",0,.5),w.add(f,"bouncingSpeed",0,.5),w.add(f,"scalingSpeed",0,.5),w.add(f,"showRay").onChange((function(t){y&&p.remove(y)})),this.gui=w,function t(){e.update(),l.rotation.x+=f.rotationSpeed,l.rotation.y+=f.rotationSpeed,l.rotation.z+=f.rotationSpeed,h+=f.bouncingSpeed,_.position.x=20+10*Math.cos(h),_.position.y=2+10*Math.abs(Math.sin(h)),g+=f.scalingSpeed;var s=Math.abs(Math.sin(g/4)),a=Math.abs(Math.cos(g/5)),o=Math.abs(Math.sin(g/7));b.scale.set(s,a,o),requestAnimationFrame(t),n.render(p,r)}();h=0;var y,g=0;const E=new s.Db,C=new s.Yb}}},p=(n(513),n(41)),c=Object(p.a)(r,(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("尽管跟动画没有直接的联系，但是再这里讨论一下对象的选择也对学习动画有帮助，这里展示一下如何使用鼠标在场景中选择一个对象。")]),t._v(" "),e("p",[t._v("在看示例之前，先看一下代码：")]),t._v(" "),e("h2",{attrs:{id:"光线投射raycaster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#光线投射raycaster"}},[t._v("#")]),t._v(" 光线投射"),e("code",[t._v("Raycaster")]),t._v(":")]),t._v(" "),e("p",[t._v("这个类用于进行光线投射。光线投射用于进行鼠标拾取（在三维空间中计算出鼠标移过了什么物体）。")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" raycaster "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Raycaster")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mouse "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Vector2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMouseMove")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将鼠标位置归一化为设备坐标。x和y方向的取值范围是( -1 to +1)")]),t._v("\n  mouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  mouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过摄像机和鼠标位置更新射线")]),t._v("\n  raycaster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFormCamera")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算物体和射线的焦点")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" intersects "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" raycaster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("intersectObjects")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" intersects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    intersects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xff0000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  renderer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nwindow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("onMouseMove"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nwindow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br")])]),[e("div",{attrs:{id:"three1"}})],t._v(" "),e("p",[t._v("因为本例的"),e("code",[t._v("three.js")]),t._v("渲染的容器不是整个屏幕，所以代码作了些许调整")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" raycaster "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Raycaster")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mouse "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Vector2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" domEl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'three'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMouseMove")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将鼠标位置归一化为设备坐标。x和y方向的取值范围是( -1 to +1), domEl为渲染容器的dom")]),t._v("\n  mouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetX "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" domEl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientWidth "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  mouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetY "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" domEl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过摄像机和鼠标位置更新射线")]),t._v("\n  raycaster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFormCamera")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算物体和射线的焦点")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" intersects "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" raycaster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("intersectObjects")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" intersects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    intersects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xff0000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  renderer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nwindow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("onMouseMove"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nwindow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br")])])],2)}),[],!1,null,"5ff4bf66",null);e.default=c.exports}}]);