(window.webpackJsonp=window.webpackJsonp||[]).push([[28,48],{411:function(t,e,n){"use strict";var o=n(12),i=n(2),s=n(187),r=n(5),a=TypeError,c=Object.defineProperty,u=i.self!==i;try{if(r){var l=Object.getOwnPropertyDescriptor(i,"self");!u&&l&&l.get&&l.enumerable||s(i,"self",{get:function(){return i},set:function(t){if(this!==i)throw new a("Illegal invocation");c(i,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else o({global:!0,simple:!0,forced:u},{self:i})}catch(t){}},416:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(408);const i={type:"change"},s={type:"start"},r={type:"end"};class a extends o.y{constructor(t,e){super(),void 0===e&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const n=this,a=-1,c=0,u=1,l=2,p=3,h=4;this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:o.Y.ROTATE,MIDDLE:o.Y.DOLLY,RIGHT:o.Y.PAN},this.target=new o.Zb;const d=new o.Zb;let f=1,m=a,g=a,b=0,y=0,v=0;const _=new o.Zb,w=new o.Yb,E=new o.Yb,j=new o.Zb,I=new o.Yb,k=new o.Yb,T=new o.Yb,C=new o.Yb,x=[],S={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height};const M=function(){const t=new o.Yb;return function(e,o){return t.set((e-n.screen.left)/n.screen.width,(o-n.screen.top)/n.screen.height),t}}(),L=function(){const t=new o.Yb;return function(e,o){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-o))/n.screen.width),t}}();function O(t){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",P),n.domElement.addEventListener("pointerup",D)),function(t){x.push(t)}(t),"touch"===t.pointerType?function(t){switch(X(t),x.length){case 1:m=p,E.copy(L(x[0].pageX,x[0].pageY)),w.copy(E);break;default:m=h;const t=x[0].pageX-x[1].pageX,e=x[0].pageY-x[1].pageY;y=b=Math.sqrt(t*t+e*e);const n=(x[0].pageX+x[1].pageX)/2,o=(x[0].pageY+x[1].pageY)/2;T.copy(M(n,o)),C.copy(T)}n.dispatchEvent(s)}(t):function(t){if(m===a)switch(t.button){case n.mouseButtons.LEFT:m=c;break;case n.mouseButtons.MIDDLE:m=u;break;case n.mouseButtons.RIGHT:m=l;break;default:m=a}const e=g!==a?g:m;e!==c||n.noRotate?e!==u||n.noZoom?e!==l||n.noPan||(T.copy(M(t.pageX,t.pageY)),C.copy(T)):(I.copy(M(t.pageX,t.pageY)),k.copy(I)):(E.copy(L(t.pageX,t.pageY)),w.copy(E));n.dispatchEvent(s)}(t))}function P(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(X(t),x.length){case 1:w.copy(E),E.copy(L(t.pageX,t.pageY));break;default:const e=function(t){const e=t.pointerId===x[0].pointerId?x[1]:x[0];return S[e.pointerId]}(t),n=t.pageX-e.x,o=t.pageY-e.y;y=Math.sqrt(n*n+o*o);const i=(t.pageX+e.x)/2,s=(t.pageY+e.y)/2;C.copy(M(i,s))}}(t):function(t){const e=g!==a?g:m;e!==c||n.noRotate?e!==u||n.noZoom?e!==l||n.noPan||C.copy(M(t.pageX,t.pageY)):k.copy(M(t.pageX,t.pageY)):(w.copy(E),E.copy(L(t.pageX,t.pageY)))}(t))}function D(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(x.length){case 0:m=a;break;case 1:m=p,E.copy(L(t.pageX,t.pageY)),w.copy(E);break;case 2:m=h,E.copy(L(t.pageX-w.pageX,t.pageY-w.pageY)),w.copy(E)}n.dispatchEvent(r)}(t):(m=a,n.dispatchEvent(r)),z(t),0===x.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",P),n.domElement.removeEventListener("pointerup",D)))}function Y(t){z(t)}function A(t){!1!==n.enabled&&(window.removeEventListener("keydown",A),g===a&&(t.code!==n.keys[c]||n.noRotate?t.code!==n.keys[u]||n.noZoom?t.code!==n.keys[l]||n.noPan||(g=l):g=u:g=c))}function R(){!1!==n.enabled&&(g=a,window.addEventListener("keydown",A))}function U(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:I.y-=.025*t.deltaY;break;case 1:I.y-=.01*t.deltaY;break;default:I.y-=25e-5*t.deltaY}n.dispatchEvent(s),n.dispatchEvent(r)}}function F(t){!1!==n.enabled&&t.preventDefault()}function z(t){delete S[t.pointerId];for(let e=0;e<x.length;e++)if(x[e].pointerId==t.pointerId)return void x.splice(e,1)}function X(t){let e=S[t.pointerId];void 0===e&&(e=new o.Yb,S[t.pointerId]=e),e.set(t.pageX,t.pageY)}this.rotateCamera=function(){const t=new o.Zb,e=new o.xb,i=new o.Zb,s=new o.Zb,r=new o.Zb,a=new o.Zb;return function(){a.set(E.x-w.x,E.y-w.y,0);let o=a.length();o?(_.copy(n.object.position).sub(n.target),i.copy(_).normalize(),s.copy(n.object.up).normalize(),r.crossVectors(s,i).normalize(),s.setLength(E.y-w.y),r.setLength(E.x-w.x),a.copy(s.add(r)),t.crossVectors(a,_).normalize(),o*=n.rotateSpeed,e.setFromAxisAngle(t,o),_.applyQuaternion(e),n.object.up.applyQuaternion(e),j.copy(t),v=o):!n.staticMoving&&v&&(v*=Math.sqrt(1-n.dynamicDampingFactor),_.copy(n.object.position).sub(n.target),e.setFromAxisAngle(j,v),_.applyQuaternion(e),n.object.up.applyQuaternion(e)),w.copy(E)}}(),this.zoomCamera=function(){let t;m===h?(t=b/y,b=y,n.object.isPerspectiveCamera?_.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom*=t,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(t=1+(k.y-I.y)*n.zoomSpeed,1!==t&&t>0&&(n.object.isPerspectiveCamera?_.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom/=t,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?I.copy(k):I.y+=(k.y-I.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new o.Yb,e=new o.Zb,i=new o.Zb;return function(){if(t.copy(C).sub(T),t.lengthSq()){if(n.object.isOrthographicCamera){const e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,o=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;t.x*=e,t.y*=o}t.multiplyScalar(_.length()*n.panSpeed),i.copy(_).cross(n.object.up).setLength(t.x),i.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(i),n.target.add(i),n.staticMoving?T.copy(C):T.add(t.subVectors(C,T).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(_.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,_.setLength(n.maxDistance)),I.copy(k)),_.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,_.setLength(n.minDistance)),I.copy(k)))},this.update=function(){_.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,_),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),d.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(i),d.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(d.distanceToSquared(n.object.position)>1e-6||f!==n.object.zoom)&&(n.dispatchEvent(i),d.copy(n.object.position),f=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){m=a,g=a,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),_.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(i),d.copy(n.object.position),f=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",F),n.domElement.removeEventListener("pointerdown",O),n.domElement.removeEventListener("pointercancel",Y),n.domElement.removeEventListener("wheel",U),n.domElement.removeEventListener("pointermove",P),n.domElement.removeEventListener("pointerup",D),window.removeEventListener("keydown",A),window.removeEventListener("keyup",R)},this.domElement.addEventListener("contextmenu",F),this.domElement.addEventListener("pointerdown",O),this.domElement.addEventListener("pointercancel",Y),this.domElement.addEventListener("wheel",U,{passive:!1}),window.addEventListener("keydown",A),window.addEventListener("keyup",R),this.handleResize(),this.update()}}},464:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},478:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"TWEEN",(function(){return r}));var o=function(){this._tweens={},this._tweensAddedDuringUpdate={}};o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:r.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var o=0;o<n.length;o++){var i=this._tweens[n[o]];i&&!1===i.update(t)&&(i._isPlaying=!1,e||delete this._tweens[n[o]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i,s,r=new o;r.Group=o,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?r.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==0&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,o;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,o=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var i=this._valuesStart[e]||0,s=this._valuesEnd[e];s instanceof Array?this._object[e]=this._interpolationFunction(s,o):("string"==typeof s&&(s="+"===s.charAt(0)||"-"===s.charAt(0)?i+parseFloat(s):parseFloat(s)),"number"==typeof s&&(this._object[e]=i+(s-i)*o))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var r=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,c=this._chainedTweens.length;a<c;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var n=t.length-1,o=n*e,i=Math.floor(o),s=r.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],o):1<e?s(t[n],t[n-1],n-o):s(t[i],t[n<i+1?n:i+1],o-i)},Bezier:function(t,e){for(var n=0,o=t.length-1,i=Math.pow,s=r.Interpolation.Utils.Bernstein,a=0;a<=o;a++)n+=i(1-e,o-a)*i(e,a)*t[a]*s(o,a);return n},CatmullRom:function(t,e){var n=t.length-1,o=n*e,i=Math.floor(o),s=r.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(o=n*(1+e))),s(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],o-i)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-o)-t[0]):1<e?t[n]-(s(t[n],t[n],t[n-1],t[n-1],o-n)-t[n]):s(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],o-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=r.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(s=[1],function(t){var e=1;if(s[t])return s[t];for(var n=t;1<n;n--)e*=n;return s[t]=e}),CatmullRom:function(t,e,n,o,i){var s=.5*(n-t),r=.5*(o-e),a=i*i;return(2*e-2*n+s+r)*(i*a)+(-3*e+3*n-2*s-r)*a+s*i+e}}},i=void 0,"function"==typeof define&&n(114)?define([],(function(){return r})):"object"==typeof exports?t.exports=r:void 0!==i&&(i.TWEEN=r)}.call(this,n(464)(t))},514:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(408);class i extends o.W{constructor(t){super(t),this.propertyNameMapping={}}load(t,e,n,i){const s=this,r=new o.z(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,(function(n){try{e(s.parse(n))}catch(e){i?i(e):console.error(e),s.manager.itemError(t)}}),n,i)}setPropertyNameMapping(t){this.propertyNameMapping=t}parse(t){function e(t){let e="",n=0;const o=/ply([\s\S]*)end_header\r?\n/.exec(t);null!==o&&(e=o[1],n=new Blob([o[0]]).size);const i={comments:[],elements:[],headerLength:n,objInfo:""},s=e.split("\n");let r;function a(t,e){const n={type:t[0]};return"list"===n.type?(n.name=t[3],n.countType=t[1],n.itemType=t[2]):n.name=t[1],n.name in e&&(n.name=e[n.name]),n}for(let t=0;t<s.length;t++){let e=s[t];if(e=e.trim(),""===e)continue;const n=e.split(/\s+/),o=n.shift();switch(e=n.join(" "),o){case"format":i.format=n[0],i.version=n[1];break;case"comment":i.comments.push(e);break;case"element":void 0!==r&&i.elements.push(r),r={},r.name=n[0],r.count=parseInt(n[1]),r.properties=[];break;case"property":r.properties.push(a(n,p.propertyNameMapping));break;case"obj_info":i.objInfo=e;break;default:console.log("unhandled",o,n)}}return void 0!==r&&i.elements.push(r),i}function n(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t);case"float":case"double":case"float32":case"float64":return parseFloat(t)}}function i(t,e){const o=e.split(/\s+/),i={};for(let e=0;e<t.length;e++)if("list"===t[e].type){const s=[],r=n(o.shift(),t[e].countType);for(let i=0;i<r;i++)s.push(n(o.shift(),t[e].itemType));i[t[e].name]=s}else i[t[e].name]=n(o.shift(),t[e].type);return i}function s(t,e){const n={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let o;let s="";null!==(o=/end_header\s([\s\S]*)$/.exec(t))&&(s=o[1]);const c=s.split("\n");let u=0,l=0;for(let t=0;t<c.length;t++){let o=c[t];if(o=o.trim(),""===o)continue;l>=e.elements[u].count&&(u++,l=0);const s=i(e.elements[u].properties,o);a(n,e.elements[u].name,s),l++}return r(n)}function r(t){let e=new o.k;return t.indices.length>0&&e.setIndex(t.indices),e.setAttribute("position",new o.A(t.vertices,3)),t.normals.length>0&&e.setAttribute("normal",new o.A(t.normals,3)),t.uvs.length>0&&e.setAttribute("uv",new o.A(t.uvs,2)),t.colors.length>0&&e.setAttribute("color",new o.A(t.colors,3)),t.faceVertexUvs.length>0&&(e=e.toNonIndexed(),e.setAttribute("uv",new o.A(t.faceVertexUvs,2))),e.computeBoundingSphere(),e}function a(t,e,n){if("vertex"===e)t.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&t.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&t.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&t.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===e){const e=n.vertex_indices||n.vertex_index,o=n.texcoord;3===e.length?(t.indices.push(e[0],e[1],e[2]),o&&6===o.length&&(t.faceVertexUvs.push(o[0],o[1]),t.faceVertexUvs.push(o[2],o[3]),t.faceVertexUvs.push(o[4],o[5]))):4===e.length&&(t.indices.push(e[0],e[1],e[3]),t.indices.push(e[1],e[2],e[3]))}}function c(t,e,n,o){switch(n){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,o),2];case"uint16":case"ushort":return[t.getUint16(e,o),2];case"int32":case"int":return[t.getInt32(e,o),4];case"uint32":case"uint":return[t.getUint32(e,o),4];case"float32":case"float":return[t.getFloat32(e,o),4];case"float64":case"double":return[t.getFloat64(e,o),8]}}function u(t,e,n,o){const i={};let s,r=0;for(let a=0;a<n.length;a++)if("list"===n[a].type){const u=[];s=c(t,e+r,n[a].countType,o);const l=s[0];r+=s[1];for(let i=0;i<l;i++)s=c(t,e+r,n[a].itemType,o),u.push(s[0]),r+=s[1];i[n[a].name]=u}else s=c(t,e+r,n[a].type,o),i[n[a].name]=s[0],r+=s[1];return[i,r]}let l;const p=this;if(t instanceof ArrayBuffer){const n=o.X.decodeText(new Uint8Array(t)),i=e(n);l="ascii"===i.format?s(n,i):function(t,e){const n={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},o="binary_little_endian"===e.format,i=new DataView(t,e.headerLength);let s,c=0;for(let t=0;t<e.elements.length;t++)for(let r=0;r<e.elements[t].count;r++){s=u(i,c,e.elements[t].properties,o),c+=s[1];const r=s[0];a(n,e.elements[t].name,r)}return r(n)}(t,i)}else l=s(t,e(t));return l}}}}]);